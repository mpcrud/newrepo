/*
 * (c) Copyright 2005-2012 JAXIO, www.jaxio.com
 * Source code generated by Celerio, a Jaxio product
 * Want to use Celerio within your company? email us at info@jaxio.com
 * Follow us on twitter: @springfuse
 * Template pack-jsf2-primefaces:src/main/java/domain/LazyDataModel.e.vm.java
 */
package com.app.mpadmin.web.domain;

import java.util.List;
import java.util.Map;
import javax.inject.Inject;

import org.primefaces.model.SortOrder;

import com.app.mpadmin.dao.support.SearchParameters;
import com.app.mpadmin.domain.TdOrder;
import com.app.mpadmin.repository.TdOrderRepository;
import com.app.mpadmin.web.domain.support.GenericLazyDataModel;

/**
 * Provides server-side pagination for search.
 *
 * @see http://jira.springframework.org/browse/SWF-1224 to avoid instanciate it as a var from your flow 
 */
public class TdOrderLazyDataModel extends GenericLazyDataModel<TdOrder> {
    private static final long serialVersionUID = 1L;

    @Inject
    transient private TdOrderRepository tdOrderRepository;
    @Inject
    transient private TdOrderSearchForm tdOrderSearchForm;

    /**
     * Prepare the search parameters and call the tdOrderRepository finder.
     * Automatically called by PrimeFaces component.
     */
    @Override
    public List<TdOrder> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String, String> filters) {
        SearchParameters sp = tdOrderSearchForm.getSearchParameters();

        // ranges
        sp.clearRanges();
        sp.addRange(tdOrderSearchForm.getBillingIdRange());
        sp.addRange(tdOrderSearchForm.getInvoiceIdRange());
        sp.addRange(tdOrderSearchForm.getOrderTypeRange());
        sp.addRange(tdOrderSearchForm.getOrderStatusRange());
        sp.addRange(tdOrderSearchForm.getOrderActiveRange());
        sp.addRange(tdOrderSearchForm.getOrderPriorityRange());
        sp.addRange(tdOrderSearchForm.getOrderCorporateTypeRange());
        sp.addRange(tdOrderSearchForm.getOrderBulkTypeRange());
        sp.addRange(tdOrderSearchForm.getProductQuantityRange());
        sp.addRange(tdOrderSearchForm.getAssignedToUseridDateRange());
        sp.addRange(tdOrderSearchForm.getBillingPhone1BlockedRange());
        sp.addRange(tdOrderSearchForm.getBillingPhone2BlockedRange());
        sp.addRange(tdOrderSearchForm.getBillingTotalAmountRange());
        sp.addRange(tdOrderSearchForm.getBillingAdvanceAmountRange());
        sp.addRange(tdOrderSearchForm.getBillingBalanceAmountRange());
        sp.addRange(tdOrderSearchForm.getBillingMarginAmountRange());
        sp.addRange(tdOrderSearchForm.getBillingTaxrateRange());
        sp.addRange(tdOrderSearchForm.getBillingPaymentGatewayRateRange());
        sp.addRange(tdOrderSearchForm.getShipmentRateRange());
        sp.addRange(tdOrderSearchForm.getBillingGrossAmountRange());
        sp.addRange(tdOrderSearchForm.getBillingNettCostRange());
        sp.addRange(tdOrderSearchForm.getCustPaymentModeRange());
        sp.addRange(tdOrderSearchForm.getCustPaymentStatusRange());
        sp.addRange(tdOrderSearchForm.getCustPaymentDateRange());
        sp.addRange(tdOrderSearchForm.getVendorPaymentModeRange());
        sp.addRange(tdOrderSearchForm.getVendorPaymentDateRange());
        sp.addRange(tdOrderSearchForm.getOrderOriginCountryIdRange());
        sp.addRange(tdOrderSearchForm.getOrderCreationDateRange());
        sp.addRange(tdOrderSearchForm.getOrderFirstUpdationDateRange());
        sp.addRange(tdOrderSearchForm.getOrderAvailabilityStatusRange());
        sp.addRange(tdOrderSearchForm.getOrderAvailabilityStatusUpdationDateRange());
        sp.addRange(tdOrderSearchForm.getDispatchDateRange());
        sp.addRange(tdOrderSearchForm.getDeliveryDateRange());
        sp.addRange(tdOrderSearchForm.getDeliveryStatusRange());
        sp.addRange(tdOrderSearchForm.getMailedReminderToVendorStatusRange());
        sp.addRange(tdOrderSearchForm.getMailedReminderToVendorDateRange());
        sp.addRange(tdOrderSearchForm.getOrderCancelRequestStatusRange());
        sp.addRange(tdOrderSearchForm.getOrderCancelRequestDateRange());
        sp.addRange(tdOrderSearchForm.getOrderCancellationToVendorStatusRange());
        sp.addRange(tdOrderSearchForm.getOrderCancellationToVendorDateRange());
        sp.addRange(tdOrderSearchForm.getOrderConversionDateRange());
        sp.addRange(tdOrderSearchForm.getOrderConfirmationDateRange());
        sp.addRange(tdOrderSearchForm.getOrderReconfirmationDateRange());
        sp.addRange(tdOrderSearchForm.getOrderCancellationTypeRange());
        sp.addRange(tdOrderSearchForm.getOrderCancellationDateRange());
        sp.addRange(tdOrderSearchForm.getOrderRefundTypeRange());
        sp.addRange(tdOrderSearchForm.getOrderRefundDateRange());
        sp.addRange(tdOrderSearchForm.getDisputeRaisedStatusRange());
        sp.addRange(tdOrderSearchForm.getDisputeRaisedDateRange());
        sp.addRange(tdOrderSearchForm.getOrderLastUpdationDateRange());
        sp.addRange(tdOrderSearchForm.getOrderAcceptNewsletterRange());
        sp.addRange(tdOrderSearchForm.getOrderAcceptPromotionalMaterialRange());
        sp.addRange(tdOrderSearchForm.getCustomint1Range());
        sp.addRange(tdOrderSearchForm.getCustomint2Range());
        sp.addRange(tdOrderSearchForm.getCarYearRange());

        // entity selectors
        sp.clearEntitySelectors();
        sp.addEntitySelector(tdOrderSearchForm.getBillingCitySelector());
        sp.addEntitySelector(tdOrderSearchForm.getShipmentCitySelector());
        sp.addEntitySelector(tdOrderSearchForm.getShipmentStateSelector());
        sp.addEntitySelector(tdOrderSearchForm.getUserSelector());
        sp.addEntitySelector(tdOrderSearchForm.getProductSelector());
        sp.addEntitySelector(tdOrderSearchForm.getShipmentCountrySelector());
        sp.addEntitySelector(tdOrderSearchForm.getBillingCountrySelector());
        sp.addEntitySelector(tdOrderSearchForm.getAssignedToUserSelector());
        sp.addEntitySelector(tdOrderSearchForm.getBillingStateSelector());

        TdOrder tdOrder = tdOrderSearchForm.getTdOrder();
        setRowCount(tdOrderRepository.findCount(tdOrder, sp)); // total count so the paginator may display the total number of pages
        populateSearchParameters(sp, first, pageSize, sortField, sortOrder, filters); // load one page of data

        return tdOrderRepository.find(tdOrder, sp);
    }
}